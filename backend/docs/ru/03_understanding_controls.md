# Описание элементов управления

На этой странице объясняется, что делает каждая настройка, простым языком. Все элементы управления доступны в левой панели; некоторые скрыты до включения переключателя **Advanced**.

![Элементы управления](/static/docs/images/04_controls.png)

---

## Presets (Пресеты)

**Что делает:** Preset — это заранее настроенная комбинация параметров, оптимизированная для определённого инструмента и цели.

**Когда использовать:** Всегда начинайте с пресета. Пресет выбирается автоматически при загрузке файла на основе обнаруженного типа трека.

**Advanced toggle:** По умолчанию редко используемые элементы управления скрыты. Включите **Advanced**, чтобы увидеть все настройки.

---

## Deduplicate Tempo

**Что делает:** Инструменты AI-транскрипции иногда записывают маркировку темпа (например, «120 BPM») сотни раз по всему файлу. Нотный редактор считывает каждую и загромождает партитуру маркировками темпа.

**Рекомендация:** Всегда включено (ON). Практически нет причин хранить дублированные события темпа.

---

## Merge Voices

**Что делает:** В нотном редакторе «voice» (голос) — это отдельная музыкальная линия в пределах одного стана. AI-транскрипция часто создаёт 2–4 голоса, когда достаточно одного, что запутывает партитуру.

Этот элемент управления объединяет ноты в один канал и выравнивает длительности аккордов, уменьшая ненужные разделения на голоса.

**Рекомендация:** Включено (ON) для мелодии, баса и FX-треков. Выключено (OFF) для strings или piano, где множественные голоса преднамеренны.

---

## Remove Overlaps

**Что делает:** Исправляет ситуации, когда одна нота начинается до окончания предыдущей на той же высоте. Перекрывающиеся ноты заставляют нотный редактор создавать отдельные голоса.

**Рекомендация:** Почти всегда включено (ON).

---

## Remove Triplets

**Что делает:** AI-транскрипция иногда создаёт ноты с триольной длительностью (три ноты за время двух), когда оригинальная музыка имела ровные ритмы. Эта функция преобразует их обратно в обычные восьмые или четвертные ноты.

**Рекомендация:** Выключено (OFF) для джаза или свинга. Включено (ON) для рока, попа и электронной музыки.

---

## Triplet Tolerance

**Что делает:** Управляет тем, насколько агрессивно инструмент определяет триоли. Меньшие значения (0.05) обнаруживают только ноты, очень близкие к триольному таймингу. Большие значения (0.25) обнаруживают больше, но могут некорректно преобразовать некоторые ноты.

**Рекомендация:** Начните с 0.15 (по умолчанию).

---

## Quantize

**Что делает:** Привязывает тайминг нот к ритмической сетке (четвертные, восьмые или шестнадцатые ноты). Делает партитуру чище, но может удалить намеренные нюансы тайминга.

**Рекомендация:** Выключено (OFF) для экспрессивной музыки (rubato, FX). Включено (ON) для ритмичной музыки.

---

## Grid (Сетка квантизации)

**Что делает:** Устанавливает размер сетки квантизации.
- **Quarter (¼):** Очень грубая — полезна только для медленных, протяжных партий
- **Eighth (⅛):** Хороший вариант по умолчанию — подходит для большинства музыки
- **Sixteenth (1/16):** Мелкая сетка — сохраняет больше деталей тайминга

---

## Remove CC Messages

**Что делает:** Удаляет «Control Change» MIDI-сообщения. Это немузыкальные данные, такие как педаль сустейна (CC#64) и легато (CC#68). Они могут загромождать MIDI-файл без пользы для нотной записи.

**Рекомендация:** Включено (ON) для очистки нотной записи. Выключено (OFF) если вы планируете использовать MIDI для воспроизведения с реалистичными инструментами.

---

## Pitch Cluster

**Что делает:** Когда AI-транскрипция создаёт ноту, например, C4 и ещё одну C#4 почти одновременно — это почти наверняка шум. Эта функция объединяет ноты, близкие по высоте и по времени, в самую сильную.

- **Time Window:** Как близко по времени (в ticks) должны быть две ноты, чтобы считаться «одновременными». По умолчанию 20.
- **Pitch Threshold:** На сколько полутонов могут отличаться две ноты и всё ещё быть объединёнными. 0 = только одинаковая высота. 1 = соседний полутон. 2 = два полутона.

**Рекомендация:** Включено (ON) с threshold 1 для большинства треков. Установите 0 для vocals.

---

## Noise Filter

**Что делает:** Удаляет ноты, которые слишком короткие или слишком тихие, чтобы быть настоящими. Это цифровой эквивалент фонового шума.

- **Min Duration:** Ноты короче этого значения (в ticks) удаляются. 480 ticks = 1 четвертная нота при стандартном разрешении.
- **Min Velocity:** Ноты тише этого значения (шкала 0–127) удаляются.

**Рекомендация:** Начните с 120 ticks / velocity 20. Корректируйте на основе Processing Log.

---

## Same-Pitch Overlap Resolver

**Что делает:** Когда две ноты одинаковой высоты перекрываются по времени, одна из них почти наверняка является артефактом транскрипции. Эта функция удаляет менее важную на основе: более длинная длительность побеждает, затем более высокая velocity, затем более ранний тайминг.

**Рекомендация:** Почти всегда включено (ON).

---

## Start from Bar

**Что делает:** Пропускает первые N тактов. Полезно, если вы уже очистили часть файла и хотите обработать только остальное.

---

## Merge All Tracks

**Что делает:** Объединяет все треки в один (Type 0 MIDI). Полезно для простого редактирования, но теряет разделение по трекам.

**Рекомендация:** Выключено (OFF), если вам специально не нужен однотрековый файл.

---

## Auto Optimize

**Что делает:** Автоматически пробует множество комбинаций параметров и выбирает ту, которая даёт самый чистый результат. Использует систему оценки, которая поощряет чистоту и штрафует за чрезмерную очистку.

**LLM Guidance:** Опционально использует AI-советника для предложения лучших параметров, когда оптимизатор застревает. Это полностью опционально и выключено по умолчанию.

> **Примечание:** При использовании Auto Optimize настройки пресетов игнорируются — оптимизатор самостоятельно подбирает все параметры.

---

## Processing Log

После обработки вкладка **Processing Log** показывает, что именно произошло на каждом шаге. Используйте её, чтобы понять, какие настройки оказали наибольшее влияние, и скорректировать их.

---

## History (История сессий)

Нажмите кнопку **History** в верхней панели для просмотра истории загрузок и обработок. Вы можете:
- Переключаться между предыдущими сессиями для сравнения
- Видеть статус каждой сессии (uploaded / processed)
- Очистить всю историю и удалить все загруженные и сгенерированные файлы
